@import 'tailwindcss';
@plugin '@tailwindcss/typography';

@custom-variant hover (&:hover);

@theme inline {
  --font-body: var(--font-body);
  --font-display: var(--font-display);
  --font-code: var(--font-code);

  --color-accent: oklch(95% 0.04 95);

  --animate-hover: hover 3000ms ease-in-out infinite;
  --animate-jam: jam 5000ms ease-in-out alternate infinite;
  --animate-pulse: pulse 1500ms cubic-bezier(0.4, 0, 0.6, 1) infinite;
  --animate-shine: pulse 5000ms ease-in-out infinite;
  --animate-wave: wave 1500ms ease-in-out infinite;

  @keyframes hover {
    50% {
      transform: translateY(-1%);
    }
  }

  @keyframes jam {
    30% {
      transform: translateX(1%) translateY(1%);
    }

    60% {
      transform: translateX(-1%) translateY(1%);
    }
  }

  @keyframes ping {
    75%,
    100% {
      transform: scale(2);
      opacity: 0;
    }
  }

  @keyframes shine {
    50% {
      transform: scale(1.1);
    }
  }

  @keyframes wave {
    0% {
      transform: scaleY(1);
      transform-origin: 50% 50%;
    }

    50% {
      transform: scaleY(0.75);
      transform-origin: 50% 50%;
    }

    100% {
      transform: scaleY(1);
      transform-origin: 50% 50%;
    }
  }
}

@layer base {
  html {
    user-select: none;
    scroll-behavior: smooth;
    scrollbar-gutter: stable;
    text-rendering: geometricPrecision;

    img {
      pointer-events: none;
    }

    ::-webkit-scrollbar {
      display: none;
    }
  }
}

@layer components {
  #moon-group {
    @apply animate-hover;
  }

  #moon-group #aura-group {
    @apply animate-shine;
  }

  #moon-group #aura-group #aura-1,
  #moon-group #aura-group #aura-2,
  #moon-group #aura-group #aura-3 {
    @apply animate-shine;
  }

  #moon-group #crater-group #crater-1,
  #moon-group #crater-group #crater-2,
  #moon-group #crater-group #crater-3,
  #moon-group #crater-group #crater-4 {
    @apply animate-hover;
  }

  #mountain-group {
    @apply animate-jam;
  }

  #mountain-group #mountain-1,
  #mountain-group #mountain-2,
  #mountain-group #mountain-3,
  #mountain-group #mountain-4 {
    @apply animate-jam;
  }
}

@utility animate {
  @apply transition-all duration-[500ms] ease-in-out;
}

@utility prose {
  hr {
    @apply border-accent mx-auto w-1/3;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply font-display tracking-tight text-amber-50;
  }

  blockquote {
    @apply border-accent my-12 rounded border-l-2 p-0;

    > p {
      @apply font-display px-5.5 py-1 leading-relaxed font-light text-neutral-400 not-italic before:content-none after:content-none;
    }
  }

  ul {
    @apply list-[square];

    > li::marker {
      @apply text-accent;
    }
  }

  ol > li::marker {
    @apply text-accent;
  }

  pre,
  code {
    @apply font-code before:content-none after:content-none;
  }

  :not(pre) > code {
    @apply relative rounded-md border border-neutral-800 bg-neutral-900 px-[4px] py-[1px] text-[0.85rem] font-medium;
  }

  pre {
    @apply relative overflow-auto border border-neutral-900 bg-neutral-900/25 p-0;

    > code {
      @apply overflow-x-scroll py-2 text-[0.825rem];

      > [data-line] {
        @apply border-l-2 border-l-transparent px-3;
      }

      > [data-highlighted-line] {
        @apply border-l-neutral-800 bg-neutral-800/50;
      }

      [data-highlighted-chars] {
        @apply rounded-md bg-neutral-800;
      }
    }
  }

  [data-rehype-pretty-code-title] {
    @apply font-code max-w-full overflow-x-auto rounded-t-md rounded-b-none border border-neutral-900 bg-neutral-900/50 px-3 py-2 text-xs whitespace-nowrap text-neutral-300;

    + pre {
      @apply mt-0 rounded-t-none;
    }
  }
}
